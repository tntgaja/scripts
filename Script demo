--[[
    GROK PARRY GOD v2026 - Chá»‰ Auto Parry SiÃªu Tá»‘t, GUI Chi Tiáº¿t
    By Grok x Tháº¯ng | Mobile Delta Optimized | KhÃ´ng cháº¿t dá»… vl
    Features: Hybrid Auto Parry 99.9%, Visualizer, Slider Predict/Threshold/Spam
    Run on Delta VNG - Key 24h nhÆ°ng ads nhanh
--]]

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Workspace = game:GetService("Workspace")
local Debris = game:GetService("Debris")

local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- Config
local Config = {
    Enabled = false,
    Mode = "Hybrid",  -- Threshold / Predict / Hybrid
    Threshold = 11.2,
    Offset = 0.01,    -- Min 0.01s cho cháº·n siÃªu nhanh
    SpamCount = 4,
    Visualizer = true,
    AntiCurve = true,
    RageSpam = true,
    LastBallPos = Vector3.new()
}

-- Find Ball
local function GetBall()
    for _, obj in ipairs(Workspace:GetChildren()) do
        if obj.Name == "Ball" and obj:IsA("BasePart") and (obj:GetAttribute("realBall") or obj.Size.Magnitude > 5) then
            return obj
        end
    end
    return nil
end

-- Is Targeted (2026 real: Highlight khi target)
local function IsTargeted()
    return LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Highlight")
end

-- Parry Execute (simulate click nÃºt Parry)
local function DoParry()
    VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)   -- Press
    VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)  -- Release
end

-- Main Loop Parry God
local conn
conn = RunService.RenderStepped:Connect(function()
    if not Config.Enabled then return end
    
    local ball = GetBall()
    if not ball or not IsTargeted() then return end
    
    local ballPos = ball.Position
    local camPos = Camera.CFrame.Position
    local dist = (ballPos - camPos).Magnitude
    local vel = (ballPos - Config.LastBallPos).Magnitude
    Config.LastBallPos = ballPos
    
    local shouldParry = false
    
    if Config.Mode == "Threshold" or Config.Mode == "Hybrid" then
        if dist / (vel + 0.001) <= Config.Threshold + Config.Offset then
            shouldParry = true
        end
    end
    
    if Config.Mode == "Predict" or Config.Mode == "Hybrid" then
        local speed = ball.AssemblyLinearVelocity.Magnitude
        local timeToHit = dist / (speed + 0.001)
        if timeToHit <= 0.12 + Config.Offset then
            shouldParry = true
        end
    end
    
    if shouldParry then
        -- Anti-curve adjust
        if Config.AntiCurve and ball:FindFirstChild("CurveDirection") then
            Config.Offset = Config.Offset + 0.02
        end
        
        -- Spam if rage
        local spam = Config.SpamCount
        if Config.RageSpam and ball.AssemblyLinearVelocity.Magnitude > 300 then
            spam = 8
        end
        
        for i = 1, spam do
            DoParry()
            task.wait(0.015)
        end
        
        -- Visualizer
        if Config.Visualizer then
            local attach0 = Instance.new("Attachment", ball)
            local attach1 = Instance.new("Attachment", LocalPlayer.Character:FindFirstChild("Head") or LocalPlayer.Character.HumanoidRootPart)
            local beam = Instance.new("Beam")
            beam.Attachment0 = attach0
            beam.Attachment1 = attach1
            beam.FaceCamera = true
            beam.Color = ColorSequence.new(Color3.fromRGB(0, 255, 0))
            beam.Width0 = 0.4
            beam.Width1 = 0.4
            beam.Transparency = NumberSequence.new(0.3)
            beam.Parent = Workspace
            Debris:AddItem(beam, 0.4)
            Debris:AddItem(attach0, 0.4)
            Debris:AddItem(attach1, 0.4)
        end
    end
end)

-- GUI Chi Tiáº¿t (Mobile Touch-Friendly)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "GrokParryGod"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 320, 0, 380)
Frame.Position = UDim2.new(0.5, -160, 0.5, -190)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 12)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "GROK PARRY GOD v2026"
Title.TextColor3 = Color3.fromRGB(0, 255, 200)
Title.Font = Enum.Font.GothamBlack
Title.TextSize = 24
Title.TextStrokeTransparency = 0.8

local CloseBtn = Instance.new("TextButton", Frame)
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.new(1,1,1)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 20
CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    if conn then conn:Disconnect() end
end)

local UICornerClose = Instance.new("UICorner", CloseBtn)
UICornerClose.CornerRadius = UDim.new(0, 8)

-- Scrolling Content
local ScrollingFrame = Instance.new("ScrollingFrame", Frame)
ScrollingFrame.Size = UDim2.new(1, -20, 1, -50)
ScrollingFrame.Position = UDim2.new(0, 10, 0, 45)
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.ScrollBarThickness = 6

local UIListLayout = Instance.new("UIListLayout", ScrollingFrame)
UIListLayout.Padding = UDim.new(0, 8)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Toggle Enabled
local function CreateToggle(name, default, callback)
    local toggle = Instance.new("TextButton", ScrollingFrame)
    toggle.Size = UDim2.new(1, 0, 0, 45)
    toggle.BackgroundColor3 = default and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(60, 60, 70)
    toggle.Text = name .. ": " .. (default and "ON" or "OFF")
    toggle.TextColor3 = Color3.new(1,1,1)
    toggle.Font = Enum.Font.GothamSemibold
    toggle.TextSize = 18
    
    local corner = Instance.new("UICorner", toggle)
    corner.CornerRadius = UDim.new(0, 10)
    
    toggle.MouseButton1Click:Connect(function()
        default = not default
        toggle.Text = name .. ": " .. (default and "ON" or "OFF")
        toggle.BackgroundColor3 = default and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(60, 60, 70)
        callback(default)
    end)
    return toggle
end

-- Slider
local function CreateSlider(name, min, max, default, step, callback)
    local frame = Instance.new("Frame", ScrollingFrame)
    frame.Size = UDim2.new(1, 0, 0, 60)
    frame.BackgroundTransparency = 1
    
    local label = Instance.new("TextLabel", frame)
    label.Size = UDim2.new(1, 0, 0.4, 0)
    label.BackgroundTransparency = 1
    label.Text = name .. ": " .. string.format("%.2f", default)
    label.TextColor3 = Color3.new(1,1,1)
    label.Font = Enum.Font.Gotham
    label.TextSize = 16
    
    local slider = Instance.new("Frame", frame)
    slider.Size = UDim2.new(1, 0, 0.3, 0)
    slider.Position = UDim2.new(0, 0, 0.5, 0)
    slider.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    local sCorner = Instance.new("UICorner", slider)
    sCorner.CornerRadius = UDim.new(1, 0)
    
    local fill = Instance.new("Frame", slider)
    fill.Size = UDim2.new((default - min)/(max - min), 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
    local fCorner = Instance.new("UICorner", fill)
    fCorner.CornerRadius = UDim.new(1, 0)
    
    local btn = Instance.new("TextButton", fill)
    btn.Size = UDim2.new(0, 20, 1.5, 0)
    btn.Position = UDim2.new(1, -10, -0.25, 0)
    btn.BackgroundColor3 = Color3.new(1,1,1)
    btn.Text = ""
    local bCorner = Instance.new("UICorner", btn)
    bCorner.CornerRadius = UDim.new(1, 0)
    
    local dragging = false
    btn.MouseButton1Down:Connect(function() dragging = true end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType.Name:find("MouseButton1") or input.UserInputType.Name:find("Touch") then dragging = false end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType.Name:find("MouseMovement") or input.UserInputType.Name:find("Touch")) then
            local pos = input.Position.X - slider.AbsolutePosition.X
            local percent = math.clamp(pos / slider.AbsoluteSize.X, 0, 1)
            fill.Size = UDim2.new(percent, 0, 1, 0)
            local value = min + percent * (max - min)
            value = math.floor(value / step) * step
            label.Text = name .. ": " .. string.format("%.2f", value)
            callback(value)
        end
    end)
end

-- Toggles & Sliders
CreateToggle("Auto Parry God", Config.Enabled, function(val) Config.Enabled = val end)

CreateToggle("Visualizer Beam", Config.Visualizer, function(val) Config.Visualizer = val end)

CreateToggle("Anti-Curve Adjust", Config.AntiCurve, function(val) Config.AntiCurve = val end)

CreateToggle("Rage Extra Spam", Config.RageSpam, function(val) Config.RageSpam = val end)

CreateSlider("Threshold (11.0-12.0)", 10, 12, Config.Threshold, 0.1, function(val) Config.Threshold = val end)

CreateSlider("Offset (0.01-0.2s)", 0.01, 0.2, Config.Offset, 0.01, function(val) Config.Offset = val end)

CreateSlider("Spam Count (1-10)", 1, 10, Config.SpamCount, 1, function(val) Config.SpamCount = val end)

-- Mode Dropdown (simple buttons)
local modes = {"Threshold", "Predict", "Hybrid"}
for i, m in ipairs(modes) do
    local btn = Instance.new("TextButton", ScrollingFrame)
    btn.Size = UDim2.new(1, 0, 0, 40)
    btn.BackgroundColor3 = (m == Config.Mode) and Color3.fromRGB(0, 120, 255) or Color3.fromRGB(50, 50, 60)
    btn.Text = "Mode: " .. m
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 18
    
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 10)
    
    btn.MouseButton1Click:Connect(function()
        Config.Mode = m
        for _, child in ipairs(ScrollingFrame:GetChildren()) do
            if child:IsA("TextButton") and child.Text:find("Mode:") then
                child.BackgroundColor3 = (child.Text == "Mode: " .. m) and Color3.fromRGB(0, 120, 255) or Color3.fromRGB(50, 50, 60)
            end
        end
    end)
end

-- Notify Loaded
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "GROK PARRY GOD Loaded ðŸ”¥",
    Text = "Toggle ON â†’ Auto cháº·n siÃªu tá»‘t, ko cháº¿t dá»…! Offset 0.01 + Hybrid mode god",
    Duration = 6
})

print("GROK PARRY GOD Ready - Cháº¡y mÆ°á»£t Delta mobile | Bro Tháº¯ng win streak lun!")

-- TNThud GUI 2026
-- Clean - Không library ngoài

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Xóa GUI cũ nếu có
if player.PlayerGui:FindFirstChild("TNThudGui") then
    player.PlayerGui.TNThudGui:Destroy()
end

-- ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "TNThudGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Nút mở
local openBtn = Instance.new("TextButton")
openBtn.Size = UDim2.new(0,60,0,60)
openBtn.Position = UDim2.new(0,20,0.5,-30)
openBtn.Text = "TN"
openBtn.TextScaled = true
openBtn.BackgroundColor3 = Color3.fromRGB(20,20,20)
openBtn.TextColor3 = Color3.fromRGB(255,255,255)
openBtn.Parent = gui
Instance.new("UICorner", openBtn).CornerRadius = UDim.new(1,0)

-- Main Frame
local main = Instance.new("Frame")
main.Size = UDim2.new(0,320,0,260)
main.Position = UDim2.new(0.5,-160,0.5,-130)
main.BackgroundColor3 = Color3.fromRGB(25,25,25)
main.Visible = false
main.Active = true
main.Draggable = true
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0,15)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,40)
title.BackgroundTransparency = 1
title.Text = "TNThud Hub"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextScaled = true
title.Parent = main

-- Nút đóng
local close = Instance.new("TextButton")
close.Size = UDim2.new(0,30,0,30)
close.Position = UDim2.new(1,-35,0,5)
close.Text = "X"
close.TextScaled = true
close.BackgroundColor3 = Color3.fromRGB(60,0,0)
close.TextColor3 = Color3.fromRGB(255,255,255)
close.Parent = main
Instance.new("UICorner", close).CornerRadius = UDim.new(1,0)

-- Tabs Frame
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(1,0,0,40)
tabFrame.Position = UDim2.new(0,0,0,45)
tabFrame.BackgroundTransparency = 1
tabFrame.Parent = main

-- Content
local content = Instance.new("Frame")
content.Size = UDim2.new(1,0,1,-90)
content.Position = UDim2.new(0,0,0,85)
content.BackgroundTransparency = 1
content.Parent = main

local tabs = {}
local currentTab = nil

local function createTab(name)
    local tabBtn = Instance.new("TextButton")
    tabBtn.Size = UDim2.new(0.5,0,1,0)
    tabBtn.Position = UDim2.new(#tabs*0.5,0,0,0)
    tabBtn.Text = name
    tabBtn.TextScaled = true
    tabBtn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    tabBtn.TextColor3 = Color3.fromRGB(255,255,255)
    tabBtn.Parent = tabFrame
    Instance.new("UICorner", tabBtn).CornerRadius = UDim.new(0,8)

    local page = Instance.new("Frame")
    page.Size = UDim2.new(1,0,1,0)
    page.BackgroundTransparency = 1
    page.Visible = false
    page.Parent = content

    tabBtn.MouseButton1Click:Connect(function()
        if currentTab then
            currentTab.Visible = false
        end
        page.Visible = true
        currentTab = page
    end)

    table.insert(tabs, tabBtn)
    return page
end

-- Tạo 2 tab
local tab1 = createTab("Main")
local tab2 = createTab("Settings")

tab1.Visible = true
currentTab = tab1

-- Button
local function createButton(parent,text,posY,callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.9,0,0,40)
    btn.Position = UDim2.new(0.05,0,0,posY)
    btn.Text = text
    btn.TextScaled = true
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Parent = parent
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)
    btn.MouseButton1Click:Connect(callback)
end

-- Toggle
local function createToggle(parent,text,posY)
    local state = false
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.9,0,0,40)
    btn.Position = UDim2.new(0.05,0,0,posY)
    btn.Text = text.." : OFF"
    btn.TextScaled = true
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Parent = parent
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)

    btn.MouseButton1Click:Connect(function()
        state = not state
        btn.Text = text.." : "..(state and "ON" or "OFF")
    end)
end

-- Nội dung tab
createButton(tab1,"Print Test",10,function()
    print("TNThud đang chạy OK")
end)

createToggle(tab1,"Test Toggle",60)

createButton(tab2,"Reset Character",10,function()
    if player.Character then
        player.Character:BreakJoints()
    end
end)

-- Mở / đóng
openBtn.MouseButton1Click:Connect(function()
    main.Visible = true
end)

close.MouseButton1Click:Connect(function()
    main.Visible = false
end)